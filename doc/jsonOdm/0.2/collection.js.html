<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>jsonOdm v0.2.0</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <script src="scripts/jquery-2.1.1.min.js"> </script>
    <script src="scripts/page.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href='//fonts.googleapis.com/css?family=Open+Sans:400italic,300,700,600,400' rel='stylesheet' type='text/css'>
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link href="styles/bootstrap.min.css" rel="stylesheet">
    <link href="styles/docs.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  </head>
  <body>
    <header class="header navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="navbar-brand" href="/">
            jsonOdm v0.2.0
          </a>
          <div class="navbar-right">
            <div class="external-links">
              <i class="fa fa-github"></i>
            </div>
          </div>
        </div>
      </div>
    </header>

    <div class="primary-content container-fluid">
      <div class="row-fluid">
          <div class="sidenav col-md-3">
            


<div class="module-list">
  <h3>Modules</h3>
  <ul class="module-listing">
  
    <li data-module-name="jsonOdm" class="collapsed collapsable module-item">
      <span class="collapsed-status">
        <i class="expand fa fa-plus-square-o"></i>
        <i class="collapse fa fa-minus-square-o"></i>
      </span>

      jsonOdm
      <ul class="thing-list">
        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="jsonOdm.Geo.BoundaryBox.html">BoundaryBox</a>
  </li>



          <ul class="thing-list">
            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.BoundaryBox.html#within">within</a>
  </li>


            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="jsonOdm.Collection.html">Collection</a>
  </li>



          <ul class="thing-list">
            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Collection.html#decorate">decorate</a>
  </li>


            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="jsonOdm.Geo.Feature.html">Feature</a>
  </li>



          <ul class="thing-list">
            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="jsonOdm.Geo.FeatureCollection.html">FeatureCollection</a>
  </li>



          <ul class="thing-list">
            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="jsonOdm.Geo.html">Geo</a>
  </li>



          <ul class="thing-list">
            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.html#detectAsGeometry">detectAsGeometry</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.html#edgeIntersectsBounds">edgeIntersectsBounds</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.html#edgeIntersectsEdge">edgeIntersectsEdge</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.html#edgeIntersectsLineString">edgeIntersectsLineString</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.html#edgeIntersectsPolygon">edgeIntersectsPolygon</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.html#edgeWithinPolygon">edgeWithinPolygon</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.html#lineStringWithinLineString">lineStringWithinLineString</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.html#pointWithinBounds">pointWithinBounds</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.html#pointWithinLineString">pointWithinLineString</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.html#pointWithinPolygon">pointWithinPolygon</a>
  </li>


            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="jsonOdm.Geo.GeometryCollection.html">GeometryCollection</a>
  </li>



          <ul class="thing-list">
            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.GeometryCollection.html#intersects">intersects</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.GeometryCollection.html#within">within</a>
  </li>


            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="JsonOdm.html">JsonOdm</a>
  </li>



          <ul class="thing-list">
            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="jsonOdm.Geo.LineString.html">LineString</a>
  </li>



          <ul class="thing-list">
            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.LineString.html#intersects">intersects</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.LineString.html#within">within</a>
  </li>


            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="jsonOdm.Geo.MultiLineString.html">MultiLineString</a>
  </li>



          <ul class="thing-list">
            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.MultiLineString.html#intersects">intersects</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.MultiLineString.html#within">within</a>
  </li>


            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="jsonOdm.Geo.MultiPoint.html">MultiPoint</a>
  </li>



          <ul class="thing-list">
            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.MultiPoint.html#intersects">intersects</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.MultiPoint.html#within">within</a>
  </li>


            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="jsonOdm.Geo.MultiPolygon.html">MultiPolygon</a>
  </li>



          <ul class="thing-list">
            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.MultiPolygon.html#intersects">intersects</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.MultiPolygon.html#within">within</a>
  </li>


            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="jsonOdm.Geo.Point.html">Point</a>
  </li>



          <ul class="thing-list">
            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.Point.html#intersects">intersects</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.Point.html#within">within</a>
  </li>


            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="jsonOdm.Geo.Polygon.html">Polygon</a>
  </li>



          <ul class="thing-list">
            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.Polygon.html#intersects">intersects</a>
  </li>


            
              

  <li class="thing">

    

    

    

    
      <i class="fa fa-cog"></i>
    

    <a href="jsonOdm.Geo.Polygon.html#within">within</a>
  </li>


            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="jsonOdm.Query.html">Query</a>
  </li>



          <ul class="thing-list">
            
          </ul>

        

          

  <li class="thing">

    
      <i class="fa fa-cube"></i>
    

    

    

    

    <a href="jsonOdm.Util.html">Util</a>
  </li>



          <ul class="thing-list">
            
          </ul>

        
      </ul>
    </li>
  
  </ul>
</div>

          </div>

          <div class="col-md-9">
              


    
    <section>
        <article>
            <pre class="prettyprint source"><code>"use strict";

// for code climate recognition
if (typeof jsonOdm === "undefined") {
    var jsonOdm = new JsonOdm();
}

/**
 * The Collection class holding the date from the selected data source
 * @param {String} [collectionName] The name of the selected collection. Leave empty if you want an empty collection but with all methods
 * @return {Collection} An array object with some extra methods added to it
 * @augments Array
 * @constructor
 */
jsonOdm.Collection = function (collectionName) {
    var self = Object.create( Array.prototype );
    // calls the constructor of Array
    self = (Array.apply(self) || self);

    if(typeof collectionName != "undefined" &amp;&amp; jsonOdm.selectedSource &amp;&amp; jsonOdm.selectedSource[collectionName]){
        self = self.concat(jsonOdm.selectedSource[collectionName]);
    }
    jsonOdm.Collection.decorate(self);

    self.$branch = function () {
        var subCollection = jsonOdm.util.branch(self,arguments);
        jsonOdm.Collection.decorate(subCollection);
        return subCollection;
    };

    return self;
};

/**
 * Takes a collection object an appends all methods to it that are needed. This way we can work with a native array as a collection
 * @param {jsonOdm.Collection} collection
 */
jsonOdm.Collection.decorate = function (collection) {
    var decorate = function (collection){
        if(jsonOdm.util.isArray(collection)) {
            /**
             * Creates a has many relation to another collection
             * @param {Array|String} foreignKeyMapName The name of the field that holds an array of foreign keys
             * @param {int|String} privateKeyField The private key of the foreign collection objects
             * @param {jsonOdm.Collection|String} childCollectionName The child collection that belongs to the foreign keys
             * @param {String} [alias] The new field that will carry all connected data. This field must not exist before setting the relation
             * @memberof jsonOdm.Collection.prototype
             * @method $hasMany
             */
            collection.$hasMany = function (foreignKeyMapName, privateKeyField, childCollectionName, alias) {
                // SET THE ALIAS
                if (typeof childCollectionName == "string") alias = alias || childCollectionName;
                // FIND THE CHILD COLLECTION
                var childCollection = childCollectionName;
                if (typeof childCollectionName == "string" &amp;&amp; jsonOdm.selectedSource &amp;&amp; jsonOdm.selectedSource[childCollectionName]){
                    childCollection = jsonOdm.selectedSource[childCollectionName];
                }

                for (var c = 0; c &lt; collection.length; c++) {
                    var foreignKeyMap = foreignKeyMapName;
                    if (collection[c].hasOwnProperty(foreignKeyMapName)) foreignKeyMap = collection[c][foreignKeyMapName];
                    if (typeof collection[c][alias] == "undefined") {
                        for (var i = 0; foreignKeyMap.length &amp;&amp; i &lt; foreignKeyMap.length; i++) {
                            var foreignModel = null;
                            for (var j = 0; j &lt; childCollection.length; j++) {
                                if (foreignKeyMap[i] == childCollection[j][privateKeyField]) {
                                    foreignModel = childCollection[j];
                                    break;
                                }
                            }
                            if (foreignModel != null) {
                                if (!collection[c][alias])collection[c][alias] = [];
                                collection[c][alias].push(foreignModel);
                            }
                        }
                    }
                }
            };

            /**
             * Creates a has many relation to another collection
             * @param {String} foreignKey The name of the field holding a foreign key
             * @param {int|String} privateKeyField The name of the private key field
             * @param {jsonOdm.Collection|String} childCollectionName The child collection that belongs to the foreign keys
             * @param {String} alias  The new field that will carry the connected data.
             * @memberof jsonOdm.Collection.prototype
             * @method $hasOne
             */
            collection.$hasOne = function (foreignKey, privateKeyField, childCollectionName, alias) {
                // SET THE ALIAS
                if (typeof childCollectionName == "string") alias = alias || childCollectionName;
                // FIND THE CHILD COLLECTION
                var childCollection = childCollectionName;
                if (typeof childCollectionName == "string" &amp;&amp; jsonOdm.selectedSource &amp;&amp; jsonOdm.selectedSource[childCollectionName]){
                    childCollection = jsonOdm.selectedSource[childCollectionName];
                }

                for (var c = 0; c &lt; collection.length; c++) {
                    var foreignKeyValue;
                    if (collection[c].hasOwnProperty(foreignKey)) foreignKeyValue = collection[c][foreignKey];
                    if (typeof collection[c][alias] == "undefined") {
                        var foreignModel = null;
                        for (var j = 0; j &lt; childCollection.length; j++) {
                            if (foreignKeyValue == childCollection[j][privateKeyField]) {
                                foreignModel = childCollection[j];
                                break;
                            }
                        }
                        if (foreignModel != null) {
                            collection[c][alias] = foreignModel;
                        }
                    }
                }
            };

            /**
             * Creates a query object filled with the right collection data
             * @return {jsonOdm.Query} A new query object
             * @memberof jsonOdm.Collection.prototype
             * @method $query
             */
            collection.$query = function(){
                return new jsonOdm.Query(collection);
            };
        }
    };

    decorate(collection);
};</code></pre>
        </article>
    </section>




          </div>
      </div>

        <br clear="both">

      <footer>
      </footer>
      <script> prettyPrint(); </script>
    </div>
  </body>
</html>
